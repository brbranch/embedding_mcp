---
description: レビューを依頼する際に使うスキル（Copilot経由）
allowed-tools: Bash
---

# Copilot Review Skill

GitHub Copilot CLI を使ってレビューを実行する。

## 実行コマンド

```bash
copilot --model gpt-5.2-codex --add-dir . --allow-all-tools -p "{プロンプト}"
```

## プロンプト構成

以下を含める：
1. 対象ファイル/ディレクトリ
2. レビュー観点（仕様レビュー、コードレビュー、文章チェック等）
3. 「資料が不足している場合は `[資料不足]` プレフィックスを付けて、どのような資料が必要か明記してください」
4. 「日本語で回答してください」

## 再レビュー時

前回の指摘結果をプロンプトに含め、以下を依頼する：
- 前回の指摘が解消されているか確認
- 新たに気づいた点があれば追加で指摘

## 資料不足時のエスカレーション（重要）

**Copilotの結果に `[資料不足]` が含まれる場合、以下のフローを必ず実行すること。勝手にスルーしてはいけない。**

1. レビュー結果に `[資料不足]` があるか確認する
2. ある場合、ユーザーに質問する（AskUserQuestion使用）:
   - 「以下の資料が不足しています: {不足内容}」
   - 選択肢:
     - 「資料を提供する」（ユーザーが資料を追加）
     - 「資料なしで再レビュー」（Copilotに資料がない旨を伝えて再実行）
     - 「現状でOK」（レビューを終了）
3. ユーザーの選択に応じて対応:
   - 資料提供 → 資料を受け取り再レビュー
   - 資料なしで再レビュー → Copilotに「{資料}は存在しない/作成予定」と伝えて再実行
   - 現状でOK → レビュー終了

**注意: `[資料不足]` を無視してcommitすると、レビューが不完全なままになる。**

## 完了時

```bash
terminal-notifier -title "Review" -message "完了" -sound default
```
